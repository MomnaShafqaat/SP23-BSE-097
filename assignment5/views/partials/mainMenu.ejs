

<div>
  Page <%= page %> of <%= totalPages %>
</div>
<nav aria-label="Page navigation example">
 <ul class="pagination">
     <li class="page-item <%= page==1? "disabled":"" %>"><a class="page-link" href="/shop-now/<%= Number(page)-1 %>">Previous</a></li>
     <% for( let index = 1; index <= totalPages; index++ ) { %>
     <li class="page-item"><a class="page-link" href="/shop-now/<%= index %>"><%= index %></a></li>
   <% } %>

   <li class="page-item <%= page==totalPages?"disabled":"" %> "><a class="page-link" href="/shop-now/<%= Number(page)+1 %>">Next</a></li>
 </ul>
</nav>


<div class="container mt-5">
    <!-- Sort Button with Bootstrap Dropdown -->
    <div class="dropdown float-end">
      <button class="btn btn-primary dropdown-toggle" type="button" id="sortButton" data-bs-toggle="dropdown" aria-expanded="false">
        Sort
      </button>
      <ul class="dropdown-menu" aria-labelledby="sortButton">
        <li><a class="dropdown-item" href="/sort-hightolow">High to Low</a></li>
        <li><a class="dropdown-item" href="/sort-lowtohigh">Low to High</a></li>
      </ul>
    </div>
  
    <!-- Product List -->
    <div class="product row mt-4">
      <% products.forEach(function(product) { %>
        <div class="product-card col-md-4 col-sm-6 col-12">
          <img src="/<%= product.picture %>" alt="<%= product.title %>" class="product-image">
          <div class="product-info">
            <h3 class="product-title"><%= product.title %></h3>
            <p class="product-price">$<%= product.price.toFixed(2) %></p>
            <a href="/add-to-cart/<%= product._id %>" >
              <button class="btn btn-primary">
                Add to Cart
              </button>
            </a>
          </div>
    </div>
      <% }); %>
</div>
<!--<table class="table table-bordered table-hover">
  <thead class="table-dark">
    <tr>
     
      <th>Title</th>
      <th>Category</th>
      <th>Price</th>
      <th>Picture</th>
      <th>Actions</th>
      <th>Add to Cart</th>
    </tr>
  </thead>
  <tbody>
    <% if (products.length > 0) { %>
      <% products.forEach((product, index) => { %>
        <tr>
          <td><%= index + 1 %></td>
          <td><%= product.title %></td>
          <td><%= product.category ? product.category.name : "No Category" %></td>
          <td>$<%= product.price %></td>
          <td>
            <% if (product.picture) { %>
              <img
                src="/uploads/<%= product.picture %>"
                alt="<%= product.title %>"
                width="80"
                height="80"
                style="object-fit: cover"
              />
            <% } else { %>
              <span>No Image</span>
            <% } %>
          </td>
          <td>
            <a href="/admin/products/edit/<%= product._id %>" class="btn btn-sm btn-warning">Edit</a>
            <a href="/admin/products/delete/<%= product._id %>" class="btn btn-sm btn-danger" onclick="return confirm('Are you sure you want to delete this product?');">Delete</a>
          </td>
          <!-- Add to Cart Button -->
          <td>
            <form action="/cart/add" method="POST">
              <input type="hidden" name="productId" value="<%= product._id %>">
              <input type="number" name="quantity" min="1" value="1" class="form-control-sm" style="width: 60px;">
              <button type="submit" class="btn btn-primary btn-sm">Add to Cart</button>
            </form>
          </td>
        </tr>
      <% }); %>
    <% } else { %>
      <tr>
        <td colspan="7" class="text-center">No products available.</td>
      </tr>
    <% } %>
  </tbody>
</table>

<!-- Pagination Controls -->
<div class="pagination">
  <a href="/shop-now/<%= page - 1 %>" class="prev" <% if (page <= 1) { %>style="display:none;"<% } %>>Previous</a>
  <span>Page <%= page %> of <%= totalPages %></span>
  <a href="/shop-now/<%= page + 1 %>" class="next" <% if (page >= totalPages) { %>style="display:none;"<% } %>>Next</a>
</div>
-->